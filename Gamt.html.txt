<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Include Axios CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Simple Like Counter</title>
  </head>
  <body>
    <button id="like-btn" style="margin-top: 5rem;">
      Like the Stream!
    </button>
    <h2 id="like-counter"></h2>

    <script>
      const btn = document.getElementById("like-btn");
      const counterID = document.getElementById("like-counter");

      // Replace this with your own Firebase Realtime Database URL
      const firebaseUrl = "https://your-project-id.firebaseio.com/";

      let counter = 0;

      function getLikes() {
        axios.get(firebaseUrl + "stream-likes.json").then((response) => {
          counter = response.data.likes || 0;  // Default to 0 if no data
          updateCounter();
        }).catch((error) => console.log(error));
      }

      function updateCounter() {
        counterID.innerHTML = `${counter} likes`;
      }

      btn.addEventListener("click", function (e) {
        axios
          .put(firebaseUrl + "stream-likes.json", {
            likes: counter + 1
          })
          .then(() => {
            getLikes();
          })
          .catch((error) => console.log(error));
      });

      // Load initial likes
      getLikes();
    </script>
  </body>
</html>